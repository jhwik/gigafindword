<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>다른 단어 찾기</title>
<style>
  body {
    text-align: center;
    font-family: 'Comic Sans MS', 'Nanum Pen Script', cursive;
    background-color: #fff8f0;
    margin: 0;
    padding: 20px;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }
  #intro {
    font-size: 24px;
    color: #ff7b7b;
    margin-bottom: 30px;
    line-height: 1.6;
  }
  #startBtn {
    padding: 15px 30px;
    font-size: 20px;
    border: none;
    border-radius: 15px;
    background-color: #ff7b7b;
    color: white;
    cursor: pointer;
    box-shadow: 0 4px 8px rgba(255,123,123,0.6);
    transition: background-color 0.3s, transform 0.2s;
  }
  #startBtn:hover {
    background-color: #ff5959;
    transform: scale(1.05);
  }
  #gameArea {
    display: none;
    flex-direction: column;
    align-items: center;
  }
  h2 {
    font-size: 28px;
    color: #ff7b7b;
    margin: 10px 0 5px;
  }
  #timer {
    font-size: 22px;
    margin-bottom: 15px;
    color: #555;
  }
  #grid {
    display: grid;
    gap: 8px;
    justify-content: center;
    margin-top: 10px;
  }
  button.wordBtn {
    font-weight: bold;
    border-radius: 12px;
    border: none;
    color: white;
    cursor: pointer;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    transition: transform 0.15s;
    user-select: none;
    width: 70px;
    height: 70px;
    font-size: 16px;
    background-color: #ff7b7b; /* 통일된 버튼 색상 */
  }
  button.wordBtn:hover {
    transform: scale(1.1);
  }
  /* 모바일 대응: 화면 너비가 작으면 버튼 크기 줄임 */
  @media (max-width: 480px) {
    button.wordBtn {
      width: 50px !important;
      height: 50px !important;
      font-size: 14px !important;
    }
    #startBtn {
      font-size: 18px;
      padding: 12px 24px;
    }
  }
</style>
</head>
<body>

<div id="intro">
  <div>휘경썜과 함께하는 2학기 수업</div>
  <div style="font-size:28px; font-weight:bold; margin: 10px 0;">게임으로 알아보기! 두둥</div>
  <button id="startBtn">게임 시작</button>
</div>

<div id="gameArea">
  <h2 id="stage">1단계</h2>
  <div id="timer">시간: 5</div>
  <div id="grid"></div>
</div>

<script>
(() => {
  // 정답 단어와 오답 단어 세트 (오답 단어는 하나, 나중에 버튼 개수에 맞게 복제해서 사용)
  const wordPairs = [
    { correct: "휘경", wrong: "휘겅" },
    { correct: "폭력", wrong: "폭렴" },
    { correct: "미디어", wrong: "미미어" },
    { correct: "SNS", wrong: "SES" },
    { correct: "진로", wrong: "진료" },
    { correct: "생명기술", wrong: "생명과학" },
    { correct: "집", wrong: "징" }
  ];

  const intro = document.getElementById("intro");
  const startBtn = document.getElementById("startBtn");
  const gameArea = document.getElementById("gameArea");
  const stageTitle = document.getElementById("stage");
  const timerDisplay = document.getElementById("timer");
  const grid = document.getElementById("grid");

  let stage = 1;
  let size = 2; // 2x2부터 시작
  let timeLeft = 5;
  let timer = null;

  function setGridSize(s) {
    grid.style.gridTemplateColumns = `repeat(${s}, auto)`;
  }

  function animateButtons() {
    const buttons = grid.querySelectorAll("button");
    buttons.forEach(btn => {
      btn.style.transition = "transform 0.2s";
      btn.style.transform = "scale(1.2)";
      setTimeout(() => {
        btn.style.transform = "scale(1)";
      }, 200);
    });
  }

  function showMessage(msg) {
    alert(msg);
  }

  function startStage() {
    if (stage > wordPairs.length) {
      // 게임 클리어
      intro.style.display = "block";
      gameArea.style.display = "none";
      intro.innerHTML = `
        <div style="font-size:28px; font-weight:bold; color:#ff7b7b; margin-bottom:20px;">
          당신이 진정한 기가왕! 🎉
        </div>
        <button id="restartBtn" style="padding: 15px 30px; font-size: 20px; border: none; border-radius: 15px; background-color: #ff7b7b; color: white; cursor: pointer; box-shadow: 0 4px 8px rgba(255,123,123,0.6);">
          다시 시작하기
        </button>
      `;
      document.getElementById("restartBtn").onclick = () => {
        stage = 1;
        size = 2;
        timeLeft = 5;
        intro.innerHTML = `
          <div>휘경썜과 함께하는 2학기 수업</div>
          <div style="font-size:28px; font-weight:bold; margin: 10px 0;">게임으로 알아보기! 두둥</div>
          <button id="startBtn">게임 시작</button>
        `;
        document.getElementById("startBtn").onclick = () => {
          intro.style.display = "none";
          gameArea.style.display = "flex";
          startStage();
        };
      };
      return;
    }

    stageTitle.textContent = stage + "단계";
    timeLeft = 5;
    timerDisplay.textContent = "시간: " + timeLeft;

    size = 2 + stage - 1; // 2x2 → 3x3 → ... 단계별 증가
    setGridSize(size);
    grid.innerHTML = "";

    const totalButtons = size * size;
    const { correct, wrong } = wordPairs[stage - 1];
    const correctIndex = Math.floor(Math.random() * totalButtons);

    for (let i = 0; i < totalButtons; i++) {
      const btn = document.createElement("button");
      btn.className = "wordBtn";
      btn.textContent = (i === correctIndex) ? correct : wrong;
      btn.style.backgroundColor = "#ff7b7b"; // 색 통일
      btn.style.width = "70px";
      btn.style.height = "70px";
      btn.style.fontSize = "16px";

      btn.onclick = () => {
        if (i === correctIndex) {
          clearInterval(timer);
          animateButtons();
          setTimeout(() => {
            stage++;
            startStage();
          }, 300);
        } else {
          showMessage("❌ 틀렸습니다!");
        }
      };

      grid.appendChild(btn);
    }

    clearInterval(timer);
    timer = setInterval(() => {
      timeLeft--;
      timerDisplay.textContent = "시간: " + timeLeft;
      if (timeLeft <= 0) {
        clearInterval(timer);
        if (confirm("⏰ 시간 초과! 다시 도전하시겠습니까?")) {
          startStage(); // 재도전
        } else {
          intro.style.display = "block";
          gameArea.style.display = "none";
        }
      }
    }, 1000);
  }

  startBtn.onclick = () => {
    intro.style.display = "none";
    gameArea.style.display = "flex";
    stage = 1;
    size = 2;
    timeLeft = 5;
    startStage();
  };
})();
</script>

</body>
</html>
